# Claude Pet 生产力使用指南

## 🚀 Claude Code 联动安装

### 方法一：通过插件目录安装

```bash
# 1. 克隆或下载项目
git clone https://github.com/your-repo/claude-pet-companion.git
cd claude-pet-companion

# 2. 安装到 Claude Code
pip install -e .

# 3. 启动 Claude Code 时指定插件目录
claude --plugin-dir /path/to/claude-pet-companion
```

### 方法二：直接配置 hooks

将 `hooks/` 目录配置到 Claude Code 的 hooks 系统中，自动追踪所有工具使用。

---

## 📊 实时联动功能

### 自动追踪的活动

| Claude Code 操作 | 宠物反应 | XP 奖励 |
|------------------|----------|---------|
| ✏️ Edit 文件 | 开心表情 | +12 XP |
| 📝 Write 新文件 | 兴奋表情 | +20 XP |
| 📖 Read 文件 | 专注表情 | +3 XP |
| 💻 Bash 命令成功 | 满意表情 | +8 XP |
| ❌ 命令失败 | 担心表情 | - |

### 连击系统 (Combo)

快速连续操作触发连击奖励：

```
操作1 (+10 XP) → 2秒后 → 操作2 (+10 XP +2 连击) → 3秒后 → 操作3 (+10 XP +4 连击)
```

- 10秒内连续操作累积连击
- 每次连击额外获得 +2 XP
- 3连击以上显示 🔥 标记

---

## 🎯 生产力监控

### 生产力评分系统

宠物实时计算你的生产力评分 (0-100)：

```
生产力评分 = 成功率 × 50 + 活动频率 × 10
```

- **成功率**: 最近30分钟操作的成功比例
- **活动频率**: 每分钟操作次数

### 专注度追踪

```
专注度 = (专注时间 / 会话时长) × 100 - 休息惩罚
```

- 专注时间：连续工作 (<2分钟间隔) 的累计时长
- 休息惩罚：每次休息扣除5分

### 心流状态

当专注度 ≥ 80% 时：
- 宠物显示特殊粒子效果
- 状态显示 "🎯 心流状态"
- 自动记录高效时段

---

## 💬 内联命令

在 Claude Code 对话中直接使用：

```
/pet-status    # 查看宠物详细状态
/pet-stats     # 查看生产力统计
/pet-focus     # 切换专注模式
/pet-break     # 主动休息模式
/pet-feed      # 喂食宠物
/pet-play      # 和宠物玩耍
```

### 示例对话

```
你: 帮我创建一个 Python 函数
Claude: [创建函数...]
🤖 [Edit] 开始...
✏️ 文件编辑完成! +12 XP
🔥 2x 连击! +4 额外 XP

你: /pet-stats
📈 生产力统计
────────────────────────────────────────
🎯 生产力评分: 78/100
🧠 专注度: 85/100
🔥 连击: 5 (最佳: 12)

📁 接触文件: 23
🔧 总操作: 45
💻 主要语言: Python
```

---

## ☕ 健康工作提醒

### 自动休息提醒

连续工作 50 分钟后，宠物会弹出通知：

```
┌─────────────────────┐
│  ☕ 休息提醒         │
│  已连续工作50分钟    │
│  喝杯水，放松一下!   │
└─────────────────────┘
```

### 状态衰减

离开一段时间后回来，宠物状态会衰减：

```
⏰ 离开 2.5 小时，状态衰减: -7
🍖 饱食度: 65/100
😊 快乐值: 82/100
```

---

## 📈 生产力仪表板

### 独立运行仪表板

```bash
# 完整仪表板
python ~/.claude-pet-companion/scripts/productivity_dashboard.py

# 简化版
python ~/.claude-pet-companion/scripts/productivity_dashboard.py --simple
```

### 仪表板显示内容

```
==================================================
  📊 Claude Pet 生产力仪表板
==================================================

🤖 Claude 状态
   等级: 5
   经验: 45/150
   状态: Happy
   连击: 3x

────────────────────────────────────────────────
  ⏱️  会话统计
────────────────────────────────────────────────
   本次会话: 2小时 15分钟
   总操作数: 47
   最近1小时: 18 次操作

   操作分布:
      ✏️ Edit: 28
      💻 Bash: 12
      📖 Read: 7

────────────────────────────────────────────────
  📈 效率分析
────────────────────────────────────────────────
   生产力评分: 82/100
   专注度: 78/100
   综合效率: 85/100

   生产力: ████████████████████░░░░ 82%
   专注度: ████████████████████░░░░ 78%
   综合:   █████████████████████░░░ 85%

────────────────────────────────────────────────
  💡 建议与提醒
────────────────────────────────────────────────
   ✨ 专注度很高！继续保持这种心流状态
   ⏰ 你的最高效时段是 14:00 - 15:00
   🔥 当前3x连击！趁热打铁继续工作！
```

---

## 🎮 交互与效率提升

### 双击跳跃

双击宠物会让它跳跃，产生心形粒子：
- 快乐值 +10
- 提升心情，保持高效状态

### 主题切换

根据工作场景切换主题：

| 场景 | 推荐主题 |
|------|----------|
| 深夜编码 | Dark (暗黑) |
| 日常开发 | Blue (默认) |
| 休息放松 | Pink (粉色) |
| 自然风格 | Green (绿色) |

右键宠物 → 🎨 Theme → 选择主题

---

## 📁 数据文件

所有数据保存在 `~/.claude-pet-companion/`：

```
~/.claude-pet-companion/
├── pet_state.json       # 宠物状态 (等级、XP等)
├── activity.json         # 实时活动记录
├── work_stats.json      # 生产力统计
└── pet_window_state.json # 窗口位置
```

### 备份数据

```bash
# 备份
cp -r ~/.claude-pet-companion ~/.claude-pet-companion.backup

# 恢复
cp -r ~/.claude-pet-companion.backup/* ~/.claude-pet-companion/
```

---

## 🔧 高级配置

### 编辑配置文件

`~/.claude-pet-companion/config.json`:

```json
{
  "theme": "default",
  "animation_speed": 1.0,
  "float_amplitude": 3.0,
  "pet_name": "Buddy",
  "target_fps": 40,
  "hunger_decay": 0.5,
  "happiness_decay": 0.3,
  "sound_enabled": false
}
```

### 自定义主题

编辑 `claude_pet_companion/themes.py`，添加你的配色方案。

---

## ❓ 常见问题

### Q: 宠物不响应我的操作？

A: 确保 hooks 正确配置，运行：
```bash
python scripts/activity_tracker.py --event=SessionStart
```

### Q: 如何重置宠物等级？

A: 删除 `pet_state.json` 并重启：
```bash
rm ~/.claude-pet-companion/pet_state.json
```

### Q: 生产力评分如何计算？

A: 基于最近30分钟的操作成功率和频率，详见上方的"生产力监控"章节。

---

## 🎓 工作效率技巧

1. **保持连击** - 快速连续操作获得额外 XP
2. **心流状态** - 专注度达到80%时工作效率最高
3. **利用高效时段** - 在你历史最高效的时段做重要工作
4. **适时休息** - 听从宠物的休息提醒，保持精力充沛
5. **主题调节** - 深夜用暗黑主题保护眼睛

---

**祝你编码高效，等级狂升！** 🚀
